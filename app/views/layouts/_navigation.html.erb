<ul class="nav">
  <li>
    <%= link_to "Postit!", root_path, :class => 'brand' %>
  </li>
  
  <li>
    <div class="dropdown">
      <button class="btn btn-default dropdown-toggle" type="button" id="categoryMenu" data-toggle="dropdown" aria-expanded="true">
        Categories
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu" aria-labelledby="categoryMenu">
        <% Category.all.each do |category| %>
          <li role="presentation"><%= link_to category.name, category_path(category), class: "menuitem", tabindex: "-1" %></li>
        <% end %>
        <% if logged_in? %>
          <li role="presentation" class="divider"></li>
          <li><%= link_to(new_category_path) do %><i class="icon-plus"></i> New category<% end %></li>
        <% end %>
      </ul>
    </div>
  </li>

  <% if !logged_in? %>
    <li>
      <%= link_to 'Register', register_path %>
    </li>

    <li >
      <%= link_to 'Login', login_path %>
    </li>
  <% end %>
  
  <% if logged_in? %>

    <li>
      <%= link_to 'New Post', new_post_path %>
    </li>
  
  
    <li>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="categoryMenu" data-toggle="dropdown" aria-expanded="true">
          <%= current_user.username %>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu" aria-labelledby="userMenu">
          
          <li><%= link_to(edit_user_path current_user) do %><i class="icon-pencil"></i> Edit profile<% end %></li>

          <li><%= link_to(user_path current_user) do %><i class="icon-pencil"></i> View profile<% end %></li>
          
          <li><%= link_to(logout_path) do %><i class="icon-circle-arrow-left"></i> Logout<% end %></li>
                 
        </ul>
      </div>
    </li>
  <% end %>

</ul>
